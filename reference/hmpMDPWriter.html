<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="HMP files are in XML format and human readable using e.g. a text editor.
HMP files are not suitable for storing large HMDP models since text files are very
verbose. Moreover, approximation of the weights and probabilities may occur since
the parser writing the hmp file may no output all digits. If you consider large
models then use the binary file format instead."><title>Function for writing an HMDP model to a hmp file (XML). The function define
subfunctions which can be used to define an HMDP model stored in a hmp file. — hmpMDPWriter • MDP2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Function for writing an HMDP model to a hmp file (XML). The function define
subfunctions which can be used to define an HMDP model stored in a hmp file. — hmpMDPWriter"><meta property="og:description" content="HMP files are in XML format and human readable using e.g. a text editor.
HMP files are not suitable for storing large HMDP models since text files are very
verbose. Moreover, approximation of the weights and probabilities may occur since
the parser writing the hmp file may no output all digits. If you consider large
models then use the binary file format instead."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MDP2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/introduction.html">An introduction to the MDP2 package in R</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/relund/mdp/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Function for writing an HMDP model to a hmp file (XML). The function define
subfunctions which can be used to define an HMDP model stored in a hmp file.</h1>
      <small class="dont-index">Source: <a href="https://github.com/relund/mdp/blob/HEAD/R/hmpMDPWriter.R" class="external-link"><code>R/hmpMDPWriter.R</code></a></small>
      <div class="d-none name"><code>hmpMDPWriter.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>HMP files are in XML format and human readable using e.g. a text editor.
HMP files are not suitable for storing large HMDP models since text files are very
verbose. Moreover, approximation of the weights and probabilities may occur since
the parser writing the hmp file may no output all digits. If you consider large
models then use the binary file format instead.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">hmpMDPWriter</span><span class="op">(</span></span>
<span>  file <span class="op">=</span> <span class="st">"r.hmp"</span>,</span>
<span>  rate <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  rateBase <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  precision <span class="op">=</span> <span class="fl">1e-05</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"HMP file created using hmpMDPWriter in R"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>file</dt>
<dd><p>The name of the file storing the model (e.g. mdp.hmp).</p></dd>


<dt>rate</dt>
<dd><p>The interest rate (used if consider discounting).</p></dd>


<dt>rateBase</dt>
<dd><p>The time where the <code>rate</code> is taken over, e.g. if the <code>rate</code> is 0.1 and <code>rateBase</code> is 365 days
then we have an interest rate of 10 percent over the year.</p></dd>


<dt>precision</dt>
<dd><p>The precision used when checking if probabilities sum to one.</p></dd>


<dt>desc</dt>
<dd><p>Description of the model.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list of functions.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The functions which can be used are:</p><ul><li><p><code>setWeights(labels, duration)</code>: Set the labels of the weights used in the actions.
<code>labels</code> is a vector of label names, <code>duration</code> A number defining which label
that corresponds to duration/time, e.g. if the first entry in labels is time then <code>duration = 1</code>.
The function must be called before starting building the model.</p></li>
<li><p><code>process()</code>: Starts a (sub)process.</p></li>
<li><p><code>endProcess()</code>: Ends a (sub)process.</p></li>
<li><p><code>stage(label=NULL)</code>: Starts a stage.</p></li>
<li><p><code>endStage()</code>: Ends a (sub)process.</p></li>
<li><p><code>state(label=NULL)</code>: Starts a state. Returns the states index number sIdx.</p></li>
<li><p><code>endState()</code>: Ends a stage.</p></li>
<li><p><code>action(label=NULL, weights, prob, statesNext=NULL)</code>: Starts an action.
Parameter <code>weights</code> must be a vector of action weights,
<code>prob</code> must contain triples of (scope, idx,pr).
The <code>scope</code> can be 3 values: 0 - A transition to the next stage in the
father process, 1 - A transition to next stage in the current process, 2 - A
transition to a child process (stage zero in the child process). <code>idx</code> in
the pair denote the index of the state at the stage considered, e.g. if scope=1
and idx=2 we consider state number 3 at next stage in the current process
(number from zero). Note scope = 3 is not supported in the hmp file format!
<code>statesNext</code> is the number of states in the next stage of the process
(only needed if have a transition to the father).</p></li>
<li><p><code>endAction()</code>: Ends an action.</p></li>
<li><p><code>closeWriter()</code>: Close the writer. Must be called when the model description has finished.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Note all indexes are starting from zero (C/C++ style).</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Lars Relund <a href="mailto:lars@relund.dk">lars@relund.dk</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># # Create a small HMDP with two levels</span></span></span>
<span class="r-in"><span><span class="co"># w&lt;-hmpMDPWriter()</span></span></span>
<span class="r-in"><span><span class="co"># w$setWeights(c("Duration","Net reward","Items"),duration=1)</span></span></span>
<span class="r-in"><span><span class="co"># w$process()</span></span></span>
<span class="r-in"><span><span class="co">#   w$stage()</span></span></span>
<span class="r-in"><span><span class="co">#   w$state(label="M0")</span></span></span>
<span class="r-in"><span><span class="co">#     w$action(label="A0",weights=c(0,0,0),prob=c(2,0,1))</span></span></span>
<span class="r-in"><span><span class="co">#     w$process()</span></span></span>
<span class="r-in"><span><span class="co">#       w$stage()</span></span></span>
<span class="r-in"><span><span class="co">#       w$state(label="D")</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A0",weights=c(0,0,1),prob=c(1,0,0.5,1,1,0.5))</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endState()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endStage()</span></span></span>
<span class="r-in"><span><span class="co">#       w$stage()</span></span></span>
<span class="r-in"><span><span class="co">#       w$state(label="C0")</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A0",weights=c(0,0,0),prob=c(1,0,1))</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A1",weights=c(1,2,1),prob=c(1,0,0.5,1,1,0.5))</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endState()</span></span></span>
<span class="r-in"><span><span class="co">#       w$state(label="C1")</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A0",weights=c(0,0,0),prob=c(1,0,1))</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A1",weights=c(1,2,1),prob=c(1,0,0.5,1,1,0.5))</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endState()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endStage()</span></span></span>
<span class="r-in"><span><span class="co">#       w$stage()</span></span></span>
<span class="r-in"><span><span class="co">#       w$state(label="C0")</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A0",weights=c(1,4,0),prob=c(0,0,1), statesNext=0)</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endState()</span></span></span>
<span class="r-in"><span><span class="co">#       w$state(label="C1")</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A0",weights=c(1,4,0),prob=c(0,0,1), statesNext=0)</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endState()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endStage()</span></span></span>
<span class="r-in"><span><span class="co">#     w$endProcess()</span></span></span>
<span class="r-in"><span><span class="co">#     w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#     w$action(label="A1",weights=c(0,0,0),prob=c(2,0,1))</span></span></span>
<span class="r-in"><span><span class="co">#     w$process()</span></span></span>
<span class="r-in"><span><span class="co">#       w$stage()</span></span></span>
<span class="r-in"><span><span class="co">#       w$state(label="D")</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A0",weights=c(0,0,1),prob=c(1,0,1))</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endState()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endStage()</span></span></span>
<span class="r-in"><span><span class="co">#       w$stage()</span></span></span>
<span class="r-in"><span><span class="co">#       w$state(label="C0")</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A0",weights=c(0,0,0),prob=c(1,0,1))</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A1",weights=c(1,2,1),prob=c(1,0,0.5,1,1,0.5))</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endState()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endStage()</span></span></span>
<span class="r-in"><span><span class="co">#       w$stage()</span></span></span>
<span class="r-in"><span><span class="co">#       w$state(label="C0")</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A0",weights=c(1,4,0),prob=c(0,0,1), statesNext=0)</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endState()</span></span></span>
<span class="r-in"><span><span class="co">#       w$state(label="C1")</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A0",weights=c(1,4,0),prob=c(0,0,1), statesNext=0)</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A1",weights=c(0,10,5),prob=c(0,0,0.5,0,1,0.5), statesNext=0)</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endState()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endStage()</span></span></span>
<span class="r-in"><span><span class="co">#     w$endProcess()</span></span></span>
<span class="r-in"><span><span class="co">#     w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#   w$endState()</span></span></span>
<span class="r-in"><span><span class="co">#   w$state(label="M1")</span></span></span>
<span class="r-in"><span><span class="co">#     w$action(label="A0",weights=c(0,0,0),prob=c(2,0,1))</span></span></span>
<span class="r-in"><span><span class="co">#     w$process()</span></span></span>
<span class="r-in"><span><span class="co">#       w$stage()</span></span></span>
<span class="r-in"><span><span class="co">#       w$state(label="D")</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A0",weights=c(0,0,1),prob=c(1,0,0.5,1,1,0.5))</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endState()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endStage()</span></span></span>
<span class="r-in"><span><span class="co">#       w$stage()</span></span></span>
<span class="r-in"><span><span class="co">#       w$state(label="C0")</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A0",weights=c(0,0,0),prob=c(1,0,1))</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endState()</span></span></span>
<span class="r-in"><span><span class="co">#       w$state(label="C1")</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A0",weights=c(0,0,0),prob=c(1,0,1))</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endState()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endStage()</span></span></span>
<span class="r-in"><span><span class="co">#       w$stage()</span></span></span>
<span class="r-in"><span><span class="co">#       w$state(label="C0")</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A0",weights=c(1,4,0),prob=c(0,0,1), statesNext=0)</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endState()</span></span></span>
<span class="r-in"><span><span class="co">#       w$state(label="C1")</span></span></span>
<span class="r-in"><span><span class="co">#         w$action(label="A0",weights=c(1,4,0),prob=c(0,0,1), statesNext=0)</span></span></span>
<span class="r-in"><span><span class="co">#         w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endState()</span></span></span>
<span class="r-in"><span><span class="co">#       w$endStage()</span></span></span>
<span class="r-in"><span><span class="co">#     w$endProcess()</span></span></span>
<span class="r-in"><span><span class="co">#     w$endAction()</span></span></span>
<span class="r-in"><span><span class="co">#   w$endState()</span></span></span>
<span class="r-in"><span><span class="co">#   w$endStage()</span></span></span>
<span class="r-in"><span><span class="co"># w$endProcess()</span></span></span>
<span class="r-in"><span><span class="co"># w$closeWriter()</span></span></span>
<span class="r-in"><span><span class="co"># </span></span></span>
<span class="r-in"><span><span class="co"># # have a look at the hmp file</span></span></span>
<span class="r-in"><span><span class="co"># xmlTreeParse("r.hmp",useInternalNodes=TRUE)</span></span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Lars Relund Nielsen.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

